<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MorseQuery</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="widget">
        <!-- Status indicator -->
        <div class="status-bar">
            <div class="status-dot" id="statusDot"></div>
            <span id="statusText">Ready</span>
        </div>

        <!-- Two-column layout -->
        <div class="main-content" id="mainContent">
            <!-- Left column: Keywords list -->
            <div class="left-column">
                <div class="keywords-list" id="keywordsList"></div>
            </div>

            <!-- Right column: Detail view -->
            <div class="right-column" id="rightColumn">
                <!-- Description (default view) -->
                <div class="detail-panel description-view" id="descriptionPanel">
                    <div class="description-content">
                        <div class="detail-keyword" id="selectedKeyword"></div>
                        <div class="detail-description" id="keywordDescription"></div>
                    </div>
                    <div class="detail-image" id="descriptionImage"></div>
                </div>

                <!-- Grounding (long press view) -->
                <div class="detail-panel grounding-view" id="groundingPanel">
                    <div class="grounding-main">
                        <div class="grounding-content">
                            <div class="grounding-keyword" id="groundingKeyword"></div>
                            <div class="grounding-text" id="groundingText"></div>
                        </div>
                        <div class="grounding-image" id="groundingImage"></div>
                    </div>
                    <div class="citation-list" id="citationList"></div>
                </div>

                <!-- Empty state -->
                <div class="detail-panel empty-view" id="emptyPanel">
                    <div class="empty-message">Press SPACE to extract keywords</div>
                </div>
            </div>
        </div>

        <!-- Hidden audio/video elements -->
        <audio id="audioPlayer" style="display: none;"></audio>
        <video id="videoPlayer" style="display: none;"></video>
        <input type="file" id="fileInput" accept="audio/*,video/*" style="display: none;">

        <!-- Minimal controls (hidden by default, show on hover) -->
        <div class="controls-bar" id="controlsBar">
            <button id="micBtn" class="control-btn" title="Microphone">üé§</button>
            <button id="fileBtn" class="control-btn" title="Upload File">üìÅ</button>

            <!-- Auto-inference controls (inline) -->
            <div class="auto-controls">
                <select id="autoModeSelect" class="auto-select" title="Auto-inference mode">
                    <option value="off">Auto: Off</option>
                    <option value="time">Auto: Time</option>
                    <option value="sentence">Auto: Sentence</option>
                </select>
                <input type="number" id="autoIntervalInput" class="auto-interval"
                       value="3" min="1" max="30" step="0.5" title="Interval (seconds)">
                <span class="auto-interval-label">s</span>
            </div>

            <!-- Configuration selector -->
            <select id="configSelect" class="config-select" title="Prompt configuration">
                <option value="1">1: Default</option>
                <option value="2">2: Technical</option>
                <option value="3">3: Medical</option>
                <option value="4">4: Business</option>
                <option value="5">5: Academic</option>
                <option value="6">6: Korean</option>
            </select>

            <button id="clearBtn" class="control-btn" title="Clear">üóëÔ∏è</button>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
