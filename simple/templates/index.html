<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MorseQuery</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="widget">
        <!-- Status indicator -->
        <div class="status-bar">
            <div class="status-dot" id="statusDot"></div>
            <span id="statusText">Ready</span>
        </div>

        <!-- Waiting indicator (shown when loading) -->
        <div class="waiting-panel" id="waitingPanel">
            <div class="waiting-spinner"></div>
            <div class="waiting-message" id="waitingMessage">Loading...</div>
        </div>

        <!-- Current keywords (from single press) -->
        <div class="keywords-panel" id="keywordsPanel">
            <div class="keywords-list vertical" id="keywordsList"></div>
        </div>

        <!-- Selected keyword description (from double press) -->
        <div class="description-panel" id="descriptionPanel">
            <div class="selected-keyword" id="selectedKeyword"></div>
            <div class="keyword-description" id="keywordDescription"></div>
        </div>

        <!-- Grounding result (from long press) -->
        <div class="grounding-panel" id="groundingPanel">
            <div class="grounding-keyword" id="groundingKeyword"></div>
            <div class="grounding-text" id="groundingText"></div>
            <div class="citation-list" id="citationList"></div>
        </div>

        <!-- Keyword history -->
        <div class="history-panel" id="historyPanel">
            <div class="history-title">History</div>
            <div class="history-list vertical" id="historyList"></div>
        </div>

        <!-- Hidden audio/video elements -->
        <audio id="audioPlayer" style="display: none;"></audio>
        <video id="videoPlayer" style="display: none;"></video>
        <input type="file" id="fileInput" accept="audio/*,video/*" style="display: none;">

        <!-- Auto-inference controls -->
        <div class="auto-inference-bar" id="autoInferenceBar">
            <label class="auto-label">Auto:</label>
            <select id="autoModeSelect" class="auto-select">
                <option value="off">Off</option>
                <option value="time">Time</option>
                <option value="sentence">Sentence</option>
            </select>
            <input type="number" id="autoIntervalInput" class="auto-interval"
                   value="3" min="1" max="30" step="0.5" title="Interval (seconds)">
            <span class="auto-interval-label">s</span>
        </div>

        <!-- Minimal controls (hidden by default, show on hover) -->
        <div class="controls-bar" id="controlsBar">
            <button id="micBtn" class="control-btn" title="Microphone">üé§</button>
            <button id="fileBtn" class="control-btn" title="Upload File">üìÅ</button>
            <button id="clearBtn" class="control-btn" title="Clear">üóëÔ∏è</button>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
